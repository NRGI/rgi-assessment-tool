.container.top-padding-med
    .well.left-padding-lg.right-padding-lg
        div.left-padding-lg.right-padding-lg.top-padding-med
            img.mapsicon(src="assets/mapsicon/all/{{assessment.assessment_ID | lowercase | limitTo: 2}}/vector.svg")
            legend {{assessment.country}} {{assessment.year}} {{assessment.version | ucfirst}} Assessment
            .pull-right
                form.form-inline
                    .form-group
                        input.form-control(
                        ng-model="searchText"
                        placeholder="Filter")
                    .form-group.margin-left-med
                        select.form-control(
                        ng-model="sortOrder"
                        ng-options="item.value as item.text for item in sortOptions")
                br
                button.btn.btn-success.pull-right(
                ng-click="submitAssessmentDialog()"
                ng-if="assessment.status==='started'") Submit assessment
                button.btn.btn-success.pull-right(
                ng-click="resubmitAssessmentDialog()"
                ng-if="assessment.status==='review_researcher' || assessment.status==='review_reviewer'") Resubmit assessment
                button.btn.btn-success.pull-right(
                ng-click="moveAssessmentDialog()"
                ng-if="current_user.role==='supervisor'") Move assessment

            .pull-left.left-padding-lg.bottom-padding-lg
                .row
                    | Researcher:
                    a(href="mailto:{{researcher.email}}")  {{researcher.firstName}}  {{researcher.lastName}}
                .row
                    | Reviewer:
                    a(
                    ng-if="reviewer"
                    href="mailto:{{reviewer.email}}")  {{reviewer.firstName}}  {{reviewer.lastName}}
                    em(ng-if="!reviewer")  N/A
                .row
                    | Status: {{assessment.status | addSpaces | ucfirst}}
                .row
                    | Last edited by
                    a(href="mailto:{{edited_by.email}}")  {{edited_by.firstName}}  {{edited_by.lastName}}
                    |  on
                    span(ng-repeat="mod in assessment.modified")
                        em(ng-show="$last")  {{mod.modified_date | date}}
                //.row
                //    | {{assessment.status | ucfirst}} on
                //    em  {{assessment.assignment.assigned_date | date}}

                .row Assessment length: {{assessment_counters.length}}
                .row
                    | Number of questions
                    text(ng-if="assessment.status==='under_review'")  reviewed: {{assessment_counters.approved + assessment_counters.flagged}} (
                        text(ng-if="assessment_counters.approved + assessment_counters.flagged!==0") {{(((assessment_counters.approved + assessment_counters.flagged)/assessment_counters.length)*100 | number :2)}}
                        text(ng-if="assessment_counters.approved + assessment_counters.flagged===0") 0
                    text(ng-if="assessment.status!=='under_review'")  completed: {{assessment_counters.complete}} (
                        text(ng-if="assessment_counters.complete!==0") {{((assessment_counters.complete/assessment_counters.length)*100 | number :2)}}
                        text(ng-if="assessment_counters.complete===0") 0
                    | %)
                .row
                    | Number of questions flagged: {{assessment_counters.flagged}}
                .row
                    | Number of questions approved: {{assessment_counters.approved}}
                .row
                    | Number of questions resubmitted: {{assessment_counters.resubmitted}}
                .row
                    s Number of questions unfinalized: {{assessment_counters.unfinalized}}
            .row {{assessment.counters}}


            rgi-assessment-detail-table