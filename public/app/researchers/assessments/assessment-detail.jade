.container.top-padding-med
    .well.left-padding-lg.right-padding-lg
        div.left-padding-lg.right-padding-lg.top-padding-med
            img.mapsicon(src="assets/mapsicon/all/{{assessment.assessment_ID | lowercase | limitTo: 2}}/vector.svg")
            legend
                h1 {{assessment.country}} {{assessment.year}} {{assessment.version}} assessment
            .pull-right
                form.form-inline
                    .form-group
                        input.form-control(
                        ng-model="searchText"
                        placeholder="Filter")
                    .form-group.margin-left-med
                        select.form-control(
                        ng-model="sortOrder"
                        ng-options="item.value as item.text for item in sortOptions")
                br
                button.btn.btn-success.pull-right(ng-click="assessmentSubmit()") Submit assessment

            .pull-left.left-padding-lg.bottom-padding-lg
                .row
                    text Researcher:
                    a(href="mailto:{{assessment.researcher.email}}")  {{assessment.researcher.firstName}}  {{assessment.researcher.lastName}}
                .row
                    text Reviewer:
                    a(href="mailto:{{assessment.reviewer.email}}")  {{assessment.reviewer.firstName}}  {{assessment.reviewer.lastName}}
                .row
                    text Status: {{assessment.status | ucfirst}}
                .row
                    text {{assessment.status | ucfirst}} on
                    em  {{assessment.assignment.assigned_date | date}}
                .row
                    text Last edited by
                    a(href="mailto:{{assessment.edited_by.email}}")  {{assessment.edited_by.firstName}}  {{assessment.edited_by.lastName}}
                    text  on
                    span(ng-repeat="mod in assessment.modified")
                        em(ng-show="$last")  {{mod.modified_date | date}}
                .row(ng-if="assessment.questions_complete===0")
                    text(ng) Number of questions complete: {{assessment.questions_complete}} (0%)
                .row(ng-if="assessment.questions_complete!==0")
                    text Number of questions complete: {{assessment.questions_complete}} (
                    text {{((assessment.questions_complete/answers.length)*100 | number :2)}}
                    text % complete)

            table.table.table-hover.table-striped.table-condensed
                thead
                    tr
                        th.col-md-1.text-center Question number
                        th.col-md-1 Component
                        th.col-md-5.text-center Question
                        th.col-md-2.text-center Status
                        th.col-md-1.text-center Researcher Score
                        th.col-md-1.text-center Reviewer Score
                        th.col-md-1.text-center
                tbody
                    tr(ng-repeat="answer in answers | filter: search_text | orderBy:sortOrder")
                        td.col-md-1.text-center {{answer.question_order}}
                        td.col-md-1 {{answer.component_text}}
                        td.col-md-5 {{answer.question_text}})
                        td.col-md-2.text-center
                            .text-success.glyphicon.glyphicon-check(ng-if="answer.status==='submitted'")  {{answer.status | ucfirst}}
                            .text-info.glyphicon.glyphicon-floppy-saved(ng-if="answer.status==='saved'")  {{answer.status | ucfirst}}
                            .text-danger.glyphicon.glyphicon-flag(ng-if="answer.status==='flagged'")  {{answer.status | ucfirst}}
                            .text(ng-if="answer.status==='assigned'")  {{answer.status | ucfirst}}
                        td.col-md-1.text-center {{answer.researcher_score}}
                        td.col-md-1.text-center {{answer.reviewer_score}}
                        td(ng-if="assessment.edit_control===identity.currentUser._id")
                            a.btn.center-block.btn-primary(ng-if="answer.status!=='flagged' && assessment.status!=='submitted'"
                            href="/assessments/assessment-edit/{{answer.answer_ID}}") Edit question
                            a.btn.center-block.btn-danger(ng-if="answer.status==='flagged'"
                            href="/assessments/assessment-edit/{{answer.answer_ID}}") Edit to answer
                        td(ng-if="assessment.edit_control!==identity.currentUser._id")
                            a.btn.center-block.btn-default(ng-if="answer.status!=='assigned' && answer.status!=='saved'"
                            href="/assessments/assessment-view/{{answer.answer_ID}}") View answer
                            a.btn.center-block.btn-success.disabled(ng-if="answer.status==='assigned' || answer.status==='saved'"
                            href="/assessments/assessment-view/{{answer.answer_ID}}") No data
